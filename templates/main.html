<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/Xhtml"><head>
    <meta charset="utf-8">
    <title>main</title>
    <style>
        body {
            width: 100vw;
            height: 100vh;
            margin: 0 0 0 0;
            background-color: black;
            display: flex;
            align-items: center;
        }
        div {
            width: 100vw;
            text-align: center;
        }
        img {
            width: 39vw;
            height: 26vw;
            animation-duration: 1s;
            animation-iteration-count: 1;
        }
        img:hover {
            cursor: default;
        }
        @keyframes minimize {
            100% {
                width: 0vw; 
                height: 0vh;
                opacity: 0;
                transform: translate(51vw, -37vw);
            }
        }
        @keyframes maximize {
            100% { 
                width: 100vw; 
                height: 66vw;
            }
        }
    </style>
</head>
<body>
    <div>
        <img src="/static/images/default_cmd.png" id="cmdimg">
    </div>
    <script>
        var movelistener = function (e){
            var x=e.offsetX, y=e.offsetY, w=this.width, h=this.height;
            if(1<=y && y<=31*h/381){
                if(w*426/575<=x && x<=w*475/575) this.src="/static/images/minimize_cmd.png";
                else if(w*476/575<=x && x<=w*525/575) this.src="/static/images/maximize_cmd.png";
                else if(w*526/575<=x && x<=w) this.src="/static/images/close_cmd.png";
                else this.src="/static/images/default_cmd.png"
            }
            else this.src="/static/images/default_cmd.png"
        };
        document.getElementById("cmdimg").addEventListener("mousemove", movelistener);
        
        var outlistener = function (){
            this.src="/static/images/default_cmd.png";
        };
        document.getElementById("cmdimg").addEventListener("mouseout", outlistener);

        document.getElementById("cmdimg").addEventListener("click", function (e){
            var x=e.offsetX, y=e.offsetY, w=this.width, h=this.height;
            if(1<=y && y<=31*h/381){
                if(w*426/575<=x && x<=w*475/575){
                    this.style.animationName="minimize";
                    document.getElementById("cmdimg").removeEventListener("mousemove", movelistener);
                    document.getElementById("cmdimg").removeEventListener("mouseout", outlistener);
                }
                else if(w*476/575<=x && x<=w*525/575){
                    this.style.animationName="maximize";
                    document.getElementById("cmdimg").removeEventListener("mousemove", movelistener);
                    document.getElementById("cmdimg").removeEventListener("mouseout", outlistener);
                }
                else if(w*526/575<=x && x<=w){
                    this.src="/static/images/loading_img.gif";
                    document.getElementById("cmdimg").removeEventListener("mousemove", movelistener);
                    document.getElementById("cmdimg").removeEventListener("mouseout", outlistener);
                    setTimeout(function(){
                        location.href="/index";
                    },3000);
                }
            }
            else location.href="/index";
        });
    </script>
</body>
</html>
